<!DOCTYPE HTML>
<html>
<head>
    <link rel="stylesheet" href="style kart.css">
    <script src="https://maps.api.2gis.ru/2.0/loader.js?pkg=full"></script>
    <script type="text/javascript"></script>
</head>
<body>
    <script>
        var map;
        var polyline;
        var nameway=[];
        let coords=[];
        var i = 0;
        var click = false;
        var func = false;
        let way=[coords, nameway];
        clickedElement = document.getElementById('clicked_element');
        DG.then(function () {
            clickedElement = document.getElementById('clicked_element'),
            map = DG.map('map', {
                center: [53.208763, 50.124508],
                zoom: 20,
                touchzoom: true,
                scrollwheelzoom: true,
            });
            map.on('click', function(e) {
                if(func){
            coords.splice(0,coords.length);
            func=false;
            }
                coords.push([e.latlng.lat ,e.latlng.lng]);   
                clickedElement.innerHTML += [' [' + e.latlng.lat + ' ,' + e.latlng.lng+'], '];
                if (!polyline){
                polyline = DG.polyline(coords, {
                    color: 'blue'
                }).addTo(map);
            } else{
                polyline.setLatLngs(coords).redraw();
            }
                });
        });
    var removelastcoord=()=>{
        DG.then(function(){
        coords.pop(),
        polyline.setLatLngs(coords).redraw();
            });
        };
    function sohr(){
    nameway[0]= prompt('Введите название маршрута!',''+i+'');
    i+=1;
    console.log(way);
    clickedElement.innerHTML = '';
    func=true;
    };
    </script>
    <div>
    <input type="button" onClick="sohr()" value="Сохранить">
    <input type="button" value="Отменить" onClick="removelastcoord()">
    </div>
    <div>
    Вы кликнули в: <span id="clicked_element"></span>
    </div>
    <div id="map">
        </div>
</body>
</html>